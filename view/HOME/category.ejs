<% layout("/INCLUDE/boilerplate")%> 

<main class="flex-grow-1 bg-light">
  <div class="container py-5">
    <h1 class="display-5 fw-bold text-teal mb-2">Plant What You LOVE</h1>
    <p class="lead text-muted mb-4">
      Select from the widest categories that you like, or select from our recommendations
    </p>
    
    <!-- Search Section -->
    <div class="card border-0 shadow-sm mb-5">
      <div class="card-body p-4">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search for seeds...">
          <button class="btn btn-gold" type="button">
            <i class="bi bi-search me-1"></i> Search
          </button>
        </div>
      </div>
    </div>

    <!-- Weather Section -->
    <div class="card border-0 shadow-sm mb-5">
      <div class="card-body p-4">
        <h3 class="fs-5 text-teal">Current Weather in Your Area</h3>
        <div id="weather-info" class="text-muted">Fetching weather details...</div>
      </div>
    </div>

    <h2 class="fs-3 fw-semibold text-teal mb-4">Our Recommendations</h2>

    <!-- Recommendations Section -->
    <div class="card border-0 shadow-sm mb-4">
      <div class="card-header bg-teal bg-opacity-10 py-3 border-0">
        <h3 class="fs-5 mb-0 text-teal">Based on your local weather conditions</h3>
      </div>
      <div class="card-body p-4">
        <p class="mb-4 text-muted">Current weather in your area is ideal for the following seeds:</p>
        
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card border-0 shadow-sm hover-card">
              <div class="row g-0">
                <div class="col-4">
                  <img src="https://plus.unsplash.com/premium_photo-1676316254976-8b514dafd3f1?w=250&h=250&auto=format&fit=crop&q=60" 
                       alt="Sunflower Plant" 
                       class="img-fluid rounded">
                </div>
                <div class="col-8">
                  <div class="card-body">
                    <h5 class="card-title text-teal">Sunflower Seeds</h5>
                    <p class="card-text small text-muted">Perfect for sunny balconies and small garden spaces. Thrives in current temperature range.</p>
                    <p class="card-text"><small class="text-gold fw-medium">Growth period: 70-100 days</small></p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card border-0 shadow-sm hover-card">
              <div class="row g-0">
                <div class="col-4">
                  <img src="https://plus.unsplash.com/premium_photo-1661834835940-c9cf77ec51e0?w=250&h=250&auto=format&fit=crop&q=80" 
                       alt="Cherry Tomato Plant" 
                       class="img-fluid rounded">
                </div>
                <div class="col-8">
                  <div class="card-body">
                    <h5 class="card-title text-teal">Cherry Tomato Seeds</h5>
                    <p class="card-text small text-muted">Ideal for pots on balconies or patios. Requires moderate watering in current conditions.</p>
                    <p class="card-text"><small class="text-gold fw-medium">Growth period: 50-80 days</small></p>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="d-flex justify-content-center gap-2">
      <button class="btn btn-outline-teal rounded-circle" style="width: 40px; height: 40px;">1</button>
      <button class="btn btn-outline-teal rounded-circle" style="width: 40px; height: 40px;">2</button>
      <button class="btn btn-outline-teal rounded-circle" style="width: 40px; height: 40px;">3</button>
      <span class="d-flex align-items-center">...</span>
      <button class="btn btn-outline-teal rounded-circle" style="width: 40px; height: 40px;">99</button>
    </div>
  </div>
</main>

<footer class="bg-teal text-white py-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
        <a class="navbar-brand fw-bold text-white" href="/">
          <i class="bi bi-leaf-fill me-2"></i>Greenica
        </a>
        <p class="mb-0 small">Connecting locals with the environment</p>
      </div>
      <div class="col-md-6 text-center text-md-end">
        <p class="mb-0 small">
          <i class="bi bi-envelope me-1"></i> plant.greenica@gmail.com
          <span class="mx-2">|</span>
          <i class="bi bi-telephone me-1"></i> +1 (555) 123-4567
        </p>
        <p class="mb-0 small">© 2025 Greenica. All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>

<!-- Weather API Script -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const apiKey = "d0bb05d1f9378c9b356a38594a54f232";
  const weatherInfo = document.getElementById("weather-info");

  function fetchWeather(lat, lon) {
    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

    fetch(url)
      .then(response => response.json())
      .then(data => {
        const weatherHTML = `
          <p><strong>${data.name}</strong></p>
          <p>${data.weather[0].description}</p>
          <p>Temperature: ${data.main.temp}°C</p>
          <p>Humidity: ${data.main.humidity}%</p>
          <p>Wind Speed: ${data.wind.speed} m/s</p>
        `;
        weatherInfo.innerHTML = weatherHTML;
      })
      .catch(error => {
        console.error("Error fetching weather data:", error);
        weatherInfo.innerHTML = "<p>Failed to load weather data.</p>";
      });
  }

  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => fetchWeather(position.coords.latitude, position.coords.longitude),
        () => {
          fetch("https://ipapi.co/json/")
            .then(response => response.json())
            .then(data => fetchWeather(data.latitude, data.longitude))
            .catch(() => {
              weatherInfo.innerHTML = "<p>Unable to fetch location data.</p>";
            });
        }
      );
    } else {
      weatherInfo.innerHTML = "<p>Geolocation is not supported by this browser.</p>";
    }
  }

  getLocation();
});
</script>
